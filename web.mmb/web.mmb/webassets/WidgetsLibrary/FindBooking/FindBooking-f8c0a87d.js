var FindBooking=new function(){var t=this;this.Setup=function(){int.f.GetValue("hidImageFolder");void 0!=int.f.GetObject("hidFindBooking_ReferencePlaceholder")&&web.Placeholder.AttachEvents("txtReference",int.f.GetValue("hidFindBooking_ReferencePlaceholder")),void 0!=int.f.GetObject("hidFindBooking_GuestNamePlaceholder")&&web.Placeholder.AttachEvents("txtGuestName",int.f.GetValue("hidFindBooking_GuestNamePlaceholder"));var t=new Date;t.setMonth(t.getMonth()-3);var e=int.d.DatepickerDate(t),a=int.f.GetIntValue("hidFindBookings_DatepickerMonths"),i=int.f.GetIntValue("hidFindBookings_DatepickerFirstDay");web.DatePicker.Setup("#txtBookedStartDate",e,t,a,i,"","","",!1),web.DatePicker.Setup("#txtBookedEndDate",e,t,a,i,"","","",!1),web.DatePicker.Setup("#txtArrivalStartDate",e,t,a,i,"","","",!1),web.DatePicker.Setup("#txtArrivalEndDate",e,t,a,i,"","","",!1),this.ChangeDates("Arrival"),this.ChangeDates("Booked")},this.Validate=function(){t.FilterBookings()},this.FilterBookings=function(){var t={};t.Reference=web.Placeholder.NotPlaceholderText("txtReference")?int.f.GetValue("txtReference"):"";var e=web.Placeholder.NotPlaceholderText("txtGuestName")?int.f.GetValue("txtGuestName"):"";t.GuestName=e;var a=int.f.GetValue("txtBookedStartDate");""!=a&&(t.BookedStartDate=int.d.New(a.split("/")[0],a.split("/")[1],a.split("/")[2]));var i=int.f.GetValue("txtBookedEndDate");""!=i&&(t.BookedEndDate=int.d.New(i.split("/")[0],i.split("/")[1],i.split("/")[2]));var d=int.f.GetValue("txtArrivalStartDate");""!=d&&(t.ArrivalStartDate=int.d.New(d.split("/")[0],d.split("/")[1],d.split("/")[2]));var n=int.f.GetValue("txtArrivalEndDate");""!=n&&(t.ArrivalEndDate=int.d.New(n.split("/")[0],n.split("/")[1],n.split("/")[2]));var r=int.f.GetValue("sddBookedDateRange");t.Booked=r;var l=int.f.GetValue("sddArrivalDateRange");t.Arrival=l;var o=JSON.stringify(t);int.ff.Call("=iVectorWidgets.TradeBookings.FilterBookings",FindBooking.FilterComplete,o)},this.ChangeDates=function(t){if("Today"==int.dd.GetValue("sdd"+t+"DateRange")){var e=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),-1)),a=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),1));int.f.SetValue("txt"+t+"StartDate",e),int.f.SetValue("txt"+t+"EndDate",a),int.f.Hide("div"+t+"StartDate"),int.f.Hide("div"+t+"EndDate")}else if("Yesterday"==int.dd.GetValue("sdd"+t+"DateRange")){var i=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),-2)),d=int.d.DatepickerDate(int.d.Today());int.f.SetValue("txt"+t+"StartDate",i),int.f.SetValue("txt"+t+"EndDate",d),int.f.Hide("div"+t+"StartDate"),int.f.Hide("div"+t+"EndDate")}else if("Last Week"==int.dd.GetValue("sdd"+t+"DateRange")){var i=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),-8)),d=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),1));int.f.SetValue("txt"+t+"StartDate",i),int.f.SetValue("txt"+t+"EndDate",d),int.f.Hide("div"+t+"StartDate"),int.f.Hide("div"+t+"EndDate")}else if("Last Fortnight"==int.dd.GetValue("sdd"+t+"DateRange")){var i=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),-15)),d=int.d.DatepickerDate(int.d.AddDays(int.d.Today(),1));int.f.SetValue("txt"+t+"StartDate",i),int.f.SetValue("txt"+t+"EndDate",d),int.f.Hide("div"+t+"StartDate"),int.f.Hide("div"+t+"EndDate")}else if("Range"==int.dd.GetValue("sdd"+t+"DateRange")){var n=int.d.Today();""==int.f.GetValue("hidCustomDateChange")&&(int.f.SetValue("txt"+t+"StartDate",int.d.DatepickerDate(n)),int.f.SetValue("txt"+t+"EndDate",int.d.DatepickerDate(n))),int.f.Show("div"+t+"StartDate"),int.f.Show("div"+t+"EndDate"),int.f.RemoveClass("divFindBooking","close"),int.f.AddClass("divFindBooking","open")}else if("Any"==int.dd.GetValue("sdd"+t+"DateRange")){{int.d.DatepickerDate(int.d.AddDays(int.d.Today(),1))}int.f.SetValue("txt"+t+"StartDate",""),int.f.SetValue("txt"+t+"EndDate",""),int.f.Hide("div"+t+"StartDate"),int.f.Hide("div"+t+"EndDate")}},this.FilterComplete=function(t){TradeBookings.UpdateResults()}};