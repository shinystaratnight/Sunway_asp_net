var FlightResultsFilter=FlightResultsFilter||{};FlightResultsFilter.UpdateFunction,FlightResultsFilter.Setup=function(t){FlightResultsFilter.UpdateFunction=t;for(var i=FlightResultsFilter.GetFilterCheckboxes(),e=0;e<i.length;e++)int.f.AttachEvent(i[e],"click",FlightResultsFilter.Filter);for(var n=int.f.GetElementsByClassName("h4","sectionHeader","divFlightFilter"),e=0;e<n.length;e++)int.f.AttachEvent(n[e],"click",function(){FlightResultsFilter.ToggleSection(this)})},FlightResultsFilter.GetFilterCheckboxes=function(){return int.f.GetObject("divFlightFilter")?int.f.GetObjectsByIDPrefix("chk_","input","divFlightFilter"):new Array},FlightResultsFilter.Filter=function(){var t=int.f.GetValue("sldFlightPrice_MinValue"),i=int.f.GetValue("sldFlightPrice_MaxValue"),e=int.f.GetValue("sldDeparture_MinValue"),n=int.f.GetValue("sldDeparture_MaxValue"),r=int.f.GetValue("sldReturn_MinValue"),l=int.f.GetValue("sldReturn_MaxValue");""==e&&(e=0),""==n&&(n=1439),""==r&&(r=0),""==l&&(l=1439);for(var s=new Array,a=new Array,u=new Array,f=new Array,F=new Array,h=new Array,o=new Array,g="False",p=FlightResultsFilter.GetFilterCheckboxes(),c=0;c<p.length;c++)p[c].checked&&(iID=p[c].id.split("_")[2],int.s.StartsWith(p[c].id,"chk_stp_")&&s.push(int.n.SafeInt(iID)),int.s.StartsWith(p[c].id,"chk_fc_")&&a.push(int.n.SafeInt(iID)),int.s.StartsWith(p[c].id,"chk_dpt_")&&u.push(iID),int.s.StartsWith(p[c].id,"chk_rtn_")&&f.push(iID),int.s.StartsWith(p[c].id,"chk_dptapt_")&&F.push(int.n.SafeInt(iID)),int.s.StartsWith(p[c].id,"chk_arrapt_")&&h.push(int.n.SafeInt(iID)),int.s.StartsWith(p[c].id,"chk_clss_")&&o.push(int.n.SafeInt(iID)),"chk_inclbag"==p[c].id&&(g="True"));var d={FilterDepartureAirportIDs:F,FilterArrivalAirportIDs:h,FilterFlightCarrierIDs:a,FilterDepartureTimes:u,FilterReturnTimes:f,FilterStops:s,FilterFlightClassIDs:o,MinOutboundDepartureFlightTimeMinutes:int.n.SafeInt(e),MaxOutboundDepartureFlightTimeMinutes:int.n.SafeInt(n),MinReturnDepartureFlightTimeMinutes:int.n.SafeInt(r),MaxReturnDepartureFlightTimeMinutes:int.n.SafeInt(l),MinPrice:int.n.SafeNumeric(t),MaxPrice:int.n.SafeNumeric(i),IncludesSupplierBaggage:g};int.ff.Call("=iVectorWidgets.FlightResultsFilter.FilterResults",FlightResultsFilter.FilterComplete,JSON.stringify(d))},FlightResultsFilter.FilterComplete=function(t){var i=JSON.parse(t);FlightResultsFilter.UpdateFilterOptions(i),FlightResultsFilter.UpdateFunction()},FlightResultsFilter.UpdateFilterOptions=function(t){var i=t.Filters,e=int.f.SafeObject("sldFlightPrice_CurrencySymbol"),n=int.f.SafeObject("sldFlightPrice_CurrencySymbolPosition"),r=int.f.SafeObject("sldFlightPrice_MinValue"),l=int.f.SafeObject("sldFlightPrice_MaxValue"),s=int.f.SafeObject("sldFlightPrice_DisplayValueDivide"),a=null==s?1:s.value;if((null==t.BookingAdjustmentAmount||void 0==t.BookingAdjustmentAmount)&&(t.BookingAdjustmentAmount=0),null!=r&&null!=l&&null!=e&&null!=n){var u=int.n.FormatMoney(Math.floor((parseFloat(r.value)+parseFloat(t.BookingAdjustmentAmount))/a),e.value,n.value);u=u.substring(0,u.indexOf("."));var f=int.n.FormatMoney(Math.floor((parseFloat(l.value)+parseFloat(t.BookingAdjustmentAmount))/a),e.value,n.value);f=f.substring(0,f.indexOf("."));var F=null==s?"":"pp";int.f.SetHTML("sldFlightPrice_Start",'<span id="sldFlightPrice_DisplayMinSlider">'+u+F+"</span>"),int.f.SetHTML("sldFlightPrice_End",'<span  id="sldFlightPrice_DisplayMaxSlider">'+f+F+"</span>")}for(var h=int.f.GetObjectsByIDPrefix("spn_fc_count_","span","divFlightFilter"),o=0;o<h.length;o++)for(var g=0;g<i.FlightCarriers.length;g++)if(int.f.SetHTML(h[o],"0"),int.n.SafeNumeric(i.FlightCarriers[g].FlightCarrierID)==int.n.SafeNumeric(h[o].id.split("_")[3])){int.f.SetHTML(h[o],int.n.SafeInt(i.FlightCarriers[g].Count));break}for(var p=int.f.GetObjectsByIDPrefix("spn_stp_count_","span","divFlightFilter"),o=0;o<p.length;o++)for(var g=0;g<i.Stops.length;g++)if(int.f.SetHTML(p[o],"0"),int.n.SafeNumeric(i.Stops[g].Stops)==int.n.SafeNumeric(p[o].id.split("_")[3])){int.f.SetHTML(p[o],int.n.SafeInt(i.Stops[g].Count));break}for(var c=int.f.GetObjectsByIDPrefix("spn_clss_count_","span","divFlightFilter"),o=0;o<c.length;o++)for(var g=0;g<i.FlightClasses.length;g++)if(int.f.SetHTML(c[o],"0"),int.n.SafeNumeric(i.FlightClasses[g].FlightClassID)==int.n.SafeNumeric(c[o].id.split("_")[3])){int.f.SetHTML(c[o],int.n.SafeInt(i.FlightClasses[g].Count));break}for(var d=int.f.GetObjectsByIDPrefix("spn_apt_count_dpt_","span","divFlightFilter"),o=0;o<d.length;o++)for(var g=0;g<i.DepartureAirports.length;g++)if(int.f.SetHTML(d[o],"0"),int.n.SafeNumeric(i.DepartureAirports[g].AirportID)==int.n.SafeNumeric(d[o].id.split("_")[4])){int.f.SetHTML(d[o],int.n.SafeInt(i.DepartureAirports[g].Count));break}for(var S=int.f.GetObjectsByIDPrefix("spn_apt_count_arr_","span","divFlightFilter"),o=0;o<S.length;o++)for(var g=0;g<i.ArrivalAirports.length;g++)if(int.f.SetHTML(S[o],"0"),int.n.SafeNumeric(i.ArrivalAirports[g].AirportID)==int.n.SafeNumeric(S[o].id.split("_")[4])){int.f.SetHTML(S[o],int.n.SafeInt(i.ArrivalAirports[g].Count));break}for(var _=int.f.GetObjectsByIDPrefix("spn_tod_count_dpt_","span","divFlightFilter"),o=0;o<_.length;o++)for(var g=0;g<i.DepartureTimes.length;g++)if(int.f.SetHTML(_[o],"0"),i.DepartureTimes[g].TimeOfDay==_[o].id.split("_")[4]){int.f.SetHTML(_[o],int.n.SafeInt(i.DepartureTimes[g].Count));break}for(var v=int.f.GetObjectsByIDPrefix("spn_tod_count_rtn_","span","divFlightFilter"),o=0;o<v.length;o++)for(var g=0;g<i.ReturnTimes.length;g++)if(int.f.SetHTML(v[o],"0"),i.ReturnTimes[g].TimeOfDay==v[o].id.split("_")[4]){int.f.SetHTML(v[o],int.n.SafeInt(i.ReturnTimes[g].Count));break}int.f.GetObject("chk_inclbag")&&int.f.SetHTML("spn_inclbag_count",t.FlightsWithBaggage)},FlightResultsFilter.RedrawFilters=function(){int.ff.Call("=iVectorWidgets.FlightResultsFilter.RedrawFilters",function(t){FlightResultsFilter.RedrawFiltersComplete(t)})},FlightResultsFilter.RedrawFiltersComplete=function(t){int.f.SetHTML("divFlightFilter",t,!0),FlightResultsFilter.Setup(FlightResultsFilter.UpdateFunction)},FlightResultsFilter.ToggleSection=function(t){var i=int.s.Substring(t.id,1),e="div"+i+"_Content";int.f.Toggle(e),int.f.HasClass(t,"hidden")?int.f.RemoveClass(t,"hidden"):int.f.AddClass(t,"hidden")};