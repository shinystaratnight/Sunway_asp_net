var TradeLogin=new function(){var e=this;this.Setup=function(){TradeLogin.SetupPlaceholders()},this.SetupPlaceholders=function(){var e=int.f.GetValue("hidTradeLogin_Placeholders").split("#");for(i=0;i<e.length;i++){var t=e[i].split("|")[0],n=e[i].split("|")[1];web.Placeholder.AttachEvents(t,n)}},this.ToggleLoginMode=function(){int.f.Toggle("divTradeContactLogin"),int.f.Toggle("pLoginAsTradeContact"),int.f.Toggle("divAgentLogin"),int.f.Toggle("pLoginAsTradeMember")},this.Validate=function(){int.f.Visible("divAgentLogin")&&(int.f.SetClassIf("txtAgentReference","error",int.f.GetObject("txtAgentReference")&&(""==int.f.GetValue("txtAgentReference")||!web.Placeholder.NotPlaceholderText("txtAgentReference"))),int.f.SetClassIf("txtWebsitePassword","error",int.f.GetObject("txtWebsitePassword")&&(""==int.f.GetValue("txtWebsitePassword")||!web.Placeholder.NotPlaceholderText("txtWebsitePassword")))),int.f.Visible("divTradeContactLogin")&&(int.f.SetClassIf("txtUsername","error",int.f.GetObject("txtUsername")&&(""==int.f.GetValue("txtUsername")||!web.Placeholder.NotPlaceholderText("txtUsername"))),int.f.SetClassIf("txtPassword","error",int.f.GetObject("txtPassword")&&(""==int.f.GetValue("txtPassword")||!web.Placeholder.NotPlaceholderText("txtPassword"))),int.f.SetClassIf("txtAgencyUserName","error",int.f.GetObject("txtAgencyUserName")&&(""==int.f.GetValue("txtAgencyUserName")||!web.Placeholder.NotPlaceholderText("txtAgencyUserName"))));var e=int.f.GetElementsByClassName("*","error","divTradeLogin");0==e.length?TradeLogin.Login(int.f.GetValue("hidLoginType")):web.InfoBox.Show(int.f.GetValue("hidIncorrectFields"),"warning")},this.Login=function(t){var i={LoginType:t,AgentReference:"",EmailAddress:"",WebsitePassword:"",UserName:"",Password:"",RememberMe:!1},n=int.f.GetValue("hidLoginMethod");"TradeContact"==t?(i.AgentReference=int.f.GetValue("txtAgencyUserName"),i.UserName=int.f.GetValue("txtUsername"),i.Password=int.f.GetValue("txtPassword")):"EmailAndPassword"==n?(i.EmailAddress=int.f.GetValue("txtEmailAddress"),i.WebsitePassword=int.f.GetValue("txtWebsitePassword")):(i.AgentReference=int.f.GetValue("txtAgentReference"),i.WebsitePassword=int.f.GetValue("txtWebsitePassword")),i.RememberMe=!int.f.GetObject("chkRememberMe")||int.cb.Checked("chkRememberMe"),int.ff.Call("=iVectorWidgets.TradeLogin.Login",e.LoginComplete,JSON.stringify(i))},this.LoginComplete=function(e){var t=JSON.parse(e);1==t.OK?web.Window.Redirect(int.f.GetValue("hidLoginRedirectURL")):"Duplicate Login"==t.Warnings?web.InfoBox.Show(int.f.GetValue("hidLoginFailed_Duplicates"),"warning"):web.InfoBox.Show(int.f.GetValue("hidLoginFailed"),"warning")},this.OnKeyPress=function(e){return e.which=e.which||e.keyCode,13==e.which?(TradeLogin.Validate("TradeOnly"),!1):void 0}};