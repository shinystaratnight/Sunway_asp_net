var HotelResults=HotelResults||{};web.PubSub.subscribe("HotelResults.UpdateResults",function(){HotelResults.UpdateResults()}),HotelResults.TabContent=[],HotelResults.RequestRoomKey="",HotelResults.RequestRoomPopup=null,HotelResults.MapView=!1,HotelResults.Redirect=function(e){int.ff.Call("=iVectorWidgets.HotelResults.GetPropertyURL",function(e){web.Window.Redirect(e)},e)},HotelResults.Hide=function(){int.f.Hide("divHotelResults")},HotelResults.Show=function(){int.f.Show("divHotelResults")},HotelResults.SetCurrentView=function(e){HotelResults.Hide(),int.ff.Call("=iVectorWidgets.HotelResults.SetCurrentView",function(){},e)},HotelResults.HideMap=function(){int.f.Hide("divHotelResultsMapHolder"),web.Tooltip.Hide(),HotelResults.MapView=!1},HotelResults.ShowMap=function(){int.f.Show("divHotelResultsMapHolder"),HotelResults.MapView=!0},HotelResults.SetupMapEvents=function(){var e=function(e){var t=Map.GetMapPoint(e.MarkerID.split("_")[1]);HotelResults.ShowDetailsPopup(t.ID)},t=function(e){web.Tooltip.Hide();var t=e.MarkerID.split("_")[1],o=function(t){web.Tooltip.Show("",t,"top",Map.GoogleMap.GetMarkerScreenPosition(e),Map.iPopupX+35,Map.iPopupY-15,"mapHover")};int.ff.Call("=iVectorWidgets.HotelResults.MapPopup",o,t)},o=function(){web.Tooltip.Hide()};Map.DefaultMarkerEvents&&Map.DefaultMarkerEvents.Setup(e,t,o)},HotelResults.ShowTab=function(e,t){web.Tooltip.Hide(),int.f.SetClassIf("liRates_"+e,"selected","Rates"==t),int.f.SetClassIf("liHotelDetails_"+e,"selected","HotelDetails"==t),int.f.SetClassIf("liHotelImages_"+e,"selected","HotelImages"==t),int.f.GetObject("liHotelMap_"+e)&&int.f.SetClassIf("liHotelMap_"+e,"selected","HotelMap"==t),int.f.GetObject("liFlights_"+e)&&int.f.SetClassIf("liFlights_"+e,"selected","Flights"==t),int.f.GetObject("liTAReviews_"+e)&&int.f.SetClassIf("liTAReviews_"+e,"selected","TAReviews"==t),int.f.GetObject("liHotelOverview_"+e)&&int.f.SetClassIf("liHotelOverview_"+e,"selected","Overview"==t),void 0!==HotelResults.TabContent[e+"_"+t]?int.f.SetHTML("divTabbedContent_"+e,HotelResults.TabContent[e+"_"+t],!0):int.ff.Call("=iVectorWidgets.HotelResults.TabbedContent",function(o){int.f.SetHTML("divTabbedContent_"+e,o,!0),"Rates"!=t&&(HotelResults.TabContent[e+"_"+t]=o)},e,t)},HotelResults.UpdateResults=function(){HotelResults.MapView||HotelResults.ShowLoadingMessage(),int.ff.Call("=iVectorWidgets.HotelResults.UpdateResults",HotelResults.UpdateResultsComplete)},HotelResults.UpdateResultsComplete=function(e){int.f.SetHTML("divHotelResults",e),int.f.Hide("divHotelResultsLoading"),HotelResults.MapView||int.f.Show("divHotelResults"),"True"==int.f.GetValue("hidHotelFilter_ScrollAfterFilter")&&int.e.ScrollIntoView("divTopHeader")},HotelResults.ShowLoadingMessage=function(){int.f.Show("divHotelResultsLoading"),int.f.Hide("divHotelResults")},HotelResults.ShowDetailsPopup=function(e){HotelPopup.ShowPopup(e,!0)},HotelResults.SelectRoom=function(e,t,o){if(Warning.Validate()){var s=int.f.GetValue("hidAddSelectedFlight");s||(s=!1);var l={AddSelectedFlightToBasket:s,PropertyRoomIndexes:new Array};l.PropertyRoomIndexes.push(t);var i=JSON.stringify(l);(void 0==o||"function"!=typeof o)&&(o=HotelResults.SelectRoomComplete),int.ff.Call("=iVectorWidgets.HotelResults.AddRoomOptionToBasket",o,i)}},HotelResults.SelectMultiRoom=function(e,t){var o={PropertyRoomIndexes:new Array},s=int.f.GetValue("hidAddSelectedFlight");s||(s=!1);for(var l=int.f.GetValue("hidPropertyResults_RoomCount"),i=1;l>=i;i++){var n=int.rb.GetValue("rad_roomoption_"+e+"_"+i);if(null==n)return void web.InfoBox.Show(int.f.GetValue("hidWarning_MultiRoomSelect"),"warning");o.PropertyRoomIndexes.push(n)}o.AddSelectedFlightToBasket=s;var u=JSON.stringify(o);(void 0==t||"function"!=typeof t)&&(t=HotelResults.SelectRoomComplete),int.ff.Call("=iVectorWidgets.HotelResults.AddRoomOptionToBasket",t,u)},HotelResults.SelectRoomComplete=function(e){if(int.s.StartsWith(e,"Error")){var t=e.split("|")[1];web.InfoBox.Show(t)}else web.Window.Redirect(e)},HotelResults.SelectRequestRoomPopup=function(e){HotelResults.RequestRoomKey=e,null==HotelResults.RequestRoomPopup?int.ff.Call("=iVectorWidgets.HotelResults.GetRequestRoomHTML",HotelResults.GetRequestRoomHTMLComplete):HotelResults.ShowRequestRoomPopup()},HotelResults.GetRequestRoomHTMLComplete=function(e){int.s.StartsWith(e,"Error")||""==e?web.InfoBox.Show("Sorry, we are unable to process requests at this time."):(HotelResults.RequestRoomPopup=int.f.GetObject("divRequestRoomPopup"),int.f.SetHTML(HotelResults.RequestRoomPopup,e),HotelResults.ShowRequestRoomPopup())},HotelResults.ShowRequestRoomPopup=function(){int.f.Show(HotelResults.RequestRoomPopup)},HotelResults.CloseRequestRoomPopup=function(){int.f.Hide("pRoomRequestSuccess"),int.f.Hide("pRoomRequestFailed"),int.f.Hide("pRoomRequestInvalid"),int.f.Show("btnRoomRequest_Submit"),int.f.Hide(HotelResults.RequestRoomPopup)},HotelResults.RequestRoom=function(){int.f.Hide("pRoomRequestSuccess"),int.f.Hide("pRoomRequestFailed"),int.f.Hide("pRoomRequestInvalid");var e=int.f.GetValue("txtRequestRoom_Name"),t=int.f.GetValue("txtRequestRoom_Email"),o=int.f.GetValue("txtRequestRoom_Telephone");if(""==e||""==t||""==o)int.f.Show("pRoomRequestInvalid");else{var s={RoomIndex:HotelResults.RequestRoomKey,PassengerName:e,PassengerEmailAddress:t,PassengerTelephoneNumber:o},l=JSON.stringify(s);int.ff.Call("=iVectorWidgets.HotelResults.RequestRoom",HotelResults.RequestRoomComplete,l)}},HotelResults.RequestRoomComplete=function(e){int.s.StartsWith(e,"Error")?int.f.Show("pRoomRequestFailed"):(int.f.Show("pRoomRequestSuccess"),int.f.Hide("btnRoomRequest_Submit"))},HotelResults.ShowExtraRooms=function(e,t,o){o=void 0==o||null==o?"":o+"_";var s=int.f.GetElementsByClassName("tr","extra","tblRooms_"+o+e+"_"+t);for(i=0;i<s.length;i++)int.f.Show(s[i]);int.f.Show("aHideExtraRooms_"+o+e+"_"+t),int.f.Hide("aShowExtraRooms_"+o+e+"_"+t)},HotelResults.HideExtraRooms=function(e,t,o){o=void 0==o||null==o?"":o+"_";var s=int.f.GetElementsByClassName("tr","extra","tblRooms_"+o+e+"_"+t);for(i=0;i<s.length;i++)int.f.Hide(s[i]);int.f.Hide("aHideExtraRooms_"+o+e+"_"+t),int.f.Show("aShowExtraRooms_"+o+e+"_"+t)},HotelResults.CancellationCharges=[],HotelResults.GetCancellationCharges=function(e,t,o,s){switch(t){case"Popup":web.Tooltip.Hide(),web.Tooltip.Show(e,"Please wait...","right",void 0,118,5);break;case"NewRow":}var l=function(l){switch(t){case"Popup":web.Tooltip.Hide(),web.Tooltip.Show(e,l,"right",void 0,118,5,"cancellationCharges"),HotelResults.CancellationCharges[o+"_"+s]=l;break;case"NewRow":}};void 0!==HotelResults.CancellationCharges[o+"_"+s]?l(HotelResults.CancellationCharges[o+"_"+s]):int.ff.Call("=iVectorWidgets.HotelResults.GetCancellationCharges",l,t,o,s)},HotelResults.HideCancellationCharges=function(e,t,o){switch(e){case"Popup":web.Tooltip.Hide();break;case"NewRow":}},HotelResults.ShowRooms=function(e){for(var t=int.f.GetElementsByClassName("tr","hiddenRooms_"+e,"divHotelResults"),o=0;o<t.length;o++)int.f.Toggle(t[o]);int.f.Visible(t[0])?(int.f.SetHTML("spShowRooms_"+e,"Hide more options"),int.f.AddClass("spShowRooms_"+e,"expanded")):(int.f.SetHTML("spShowRooms_"+e,"Show more options"),int.f.RemoveClass("spShowRooms_"+e,"expanded"))},HotelResults.ShowMoreOptions=function(e,t){for(var o=int.f.GetObject("hidShowMoreText")?int.f.GetValue("hidShowMoreText"):"Show more options",s=int.f.GetObject("hidHideMoreText")?int.f.GetValue("hidHideMoreText"):"Hide more options",l=int.f.GetElementsByClassName("tr","hiddenRooms_"+e+"_"+t,"divHotelResults"),i=0;i<l.length;i++)int.f.Toggle(l[i]);int.f.Visible(l[0])?(int.f.SetHTML("spShowRooms_"+e+"_"+t,s),int.f.AddClass("spShowRooms_"+e+"_"+t,"expanded")):(int.f.SetHTML("spShowRooms_"+e+"_"+t,o),int.f.RemoveClass("spShowRooms_"+e+"_"+t,"expanded"))},HotelResults.ToggleParentClass=function(e,t,o,s){for(var l=int.f.GetElementsByClassName(e.tagName,t,o),i=0;i<l.length;i++)int.f.ToggleClassIf(l[i],s,"",l[i]==e)};