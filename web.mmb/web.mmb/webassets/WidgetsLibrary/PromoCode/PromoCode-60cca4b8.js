var PromoCode=PromoCode||{};PromoCode.Setup=function(){var o=int.f.GetObject(int.f.GetValue("hidPromoCode_InjectTarget"));if(o){var e=int.f.GetObject("divPromoCode");o.parentNode.insertBefore(e,o),int.f.Show(e)}},PromoCode.Inject=function(o){int.ff.Call("=iVectorWidgets.PromoCode.InjectHTML",PromoCode.InjectHTMLComplete,o)},PromoCode.InjectHTMLComplete=function(o){var e=JSON.parse(o),t=document.createElement("div");t.setAttribute("id","divPromoCodeContainer"),t.innerHTML=e.HTML,document.body.appendChild(t);var n=int.f.GetObject(e.InjectID);if(n){var t=int.f.GetObject("divPromoCode");n.parentNode.insertBefore(t,n),int.f.Show(t)}},PromoCode.ApplyPromoCode=function(){web.InfoBox.Close();var o=int.f.GetValue("txtPromoCode");int.ff.Call("=iVectorWidgets.PromoCode.ApplyPromoCode",function(o){PromoCode.ApplyPromoCodeComplete(o)},o)},PromoCode.ApplyPromoCodeComplete=function(o){var e=int.f.GetValue("hidPromoCode_CurrencySymbol"),t=int.f.GetValue("hidPromoCode_CurrencyPosition"),n=JSON.parse(o);0==n.Warning?(int.f.SetHTML("spnPromoCodeDiscount",int.n.FormatMoney(n.Discount,e,t)),int.f.SetValue("txtPromoCode",""),int.f.Hide("txtPromoCode"),int.f.Hide("pPromoCodeInfo"),int.f.Hide("aUpdatePromoCode"),int.f.Show("pAppliedCode"),int.f.Show("aRemovePromoCode"),"undefined"!=typeof PaymentBasket&&PaymentBasket.UpdateBasketHTML(),web.PubSub.publish("PromoCode.ChangeSuccess")):int.f.SetValue("txtPromoCode",n.Warning)},PromoCode.RemovePromoCode=function(){int.ff.Call("=iVectorWidgets.PromoCode.RemovePromoCode",function(o){PromoCode.RemovePromoCodeComplete(o)})},PromoCode.RemovePromoCodeComplete=function(o){var e=JSON.parse(o);int.f.Show("pPromoCodeInfo"),int.f.Show("aUpdatePromoCode"),int.f.Show("txtPromoCode"),int.f.Hide("pAppliedCode"),int.f.Hide("aRemovePromoCode"),"False"!=e.Success&&(web.PubSub.publish("PromoCode.ChangeSuccess"),"undefined"!=typeof PaymentBasket&&PaymentBasket.UpdateBasketHTML())};